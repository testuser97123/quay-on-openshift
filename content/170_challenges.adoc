////
Purpose
-------
Any noteworthy challenges encountered during the engagement should be
enumerated and described here.  A challenge is noteworthy if:
- It impacted the pace of progress or delivery timelines
- It impacted and/or prevented the completion of one or more tasks
- Required a workaround to be implemented
- A support ticket or BZ was opened with Red Hat to track it
- A support ticket for a 3rd party was opened
- A support ticket internal to the customer was opened

Challenge Description
-----
Be matter-of-fact. Try not to assign intention to any actions which were taken
or failed to be taken. Dedicate one or two sentences each to:
- What happened or failed to happen
- The impact of this
- The known or suspected cause


Immediate Resolution
-----
Limit to as few sentences as possible. Include any and all of the following that apply:
- Workarounds - one sentence describing the workaround, one sentence explaining any drawbacks
- Ticket/BZ numbers.  Links to the ticket if applicable.
- Hotfixes provided by Engineering
- If the immediate solution was to re-arrange the normal order of tasks, that should be noted here.

Future Recommendation
-----
This can be either the recommended "permanent" solution which should later replace a workaround, or preventative advice.




Example 1
------
===== Challenge
The server hardware required for RHV did not have the required number of fibre connections to the SAN.  As RHV requires storage to establish a logical Data Center, installation could not continue until the servers were were properly cabled to the SAN, pushing the expected installation time back by two days.  The required cables were not part of the order submitted to the integrator.

===== Immediate Resolution
The customer placed an emergency order with the integrator for the necessary cables.  In the mean time, Red Hat Consulting rearranged the planned order of tasks to focus on items which did not have installation as a pre-requisite.

===== Future Recommendation
If possible hardware readiness should be established at least one week prior to Red Hat Consulting arriving on-site.  This provides enough lead time to make corrections without impacting timelines.


Example 2
-----
===== Challenge
An authentication error is preventing deployment of new pods from the customer's image repository.  This makes it impossible to deploy and test code changes.  The self-signed certificates generated by the OpenShift installer are invalid.

===== Immediate Resolution
Ticket 12345 was opened with support.  This is a known issue that is already being tracked in BZ 45678.  The support ticket has been attached to the BZ.  Engineering has recommended manually re-generating the self-signed certificates for each cluster.  This allowed the engagement to get past the authentication issue.

===== Future Recommendation
A fix has already been implemented upstream and is expected to be part of the next OpenShift release.  It is recommended that the customer upgrade OpenShift as soon as the next release is available and verify it is no longer necessary to manually re-generate certificates.

////

= Quay app pod giving X509: Certificate signed by unknown athourity error even after creating the quay secret with the custom-cert for CA signed certificate for quay.

== Challenge
Quay is not reading the custom-cert parameter from the secret.

== Immediate Resolution
The CA signed certificate can be added from the quay-config-editor console under Custom SSL certificate section.

= Clair Unable to fetch security information in clair 3.5.6

== Challange 
Clair is unable to perform the vulnerability scan as we are using a proxy environment, For operator based deployment it is not possible to add the parameter for proxy vaiable in clair.
Support case raised:03028750

== Immediate Resolution
As guided by RedHat support team ,We deployed clair manually and added the proxy variable parameters.

= TLS handshake failure while pulling images from Quay.

== Challenge
while pulling images from Quay using podman it gives tls handhsake failure .

== immediate Resolution
 Adding the certificate to /etc/containers/cert.d/quay-registry. 

= Email Option is not available while setting up  notifications

== Challange
Unable to get email option while setting up notification for repository.

image::mail-issue.PNG[pdfwidth=99%,width=99%]

== Immediate Resolution
Restarting the quay app pod solved the issue.

= Quay and OCP console auto-redirection

== Challenge
After opening the quay console if we try to open the ocp console OCP was opening the quay page however the url was still that of OCP console.As per RedHat Support team it is a bug.
Support case raised: 03038618

image::console-error.png[pdfwidth=99%,width=99%]

== Immediate Resolution
For custom url we used the FQDN  CA signed certificate and key instead of the wildcard certificate(*.apps) for Quay, which provided ua a temporary solution.

= Quay app pod giving X509: Certificate signed by unknown athourity error while connecting to Hitachi Storage

== Challenge
Quay was not getting up.

== Immediate Resolution
Dowloaded the CA of Hitachi Storage from the browser (certificate was in DER format as it was a windows machine), converted into PEM format (openssl x509 -inform DER -in certificate.cer -out certificate.crt), uploaded under Custom SSL certificate section from config editor and Reconfigured the Quay.

= Error "required component `route` marked as unmanaged, but `configBundleSecret` is missing necessary fields"

== Challange 
Quay was not getting up

== Immediate Resolution
Added following parameter by editing the config.yaml file:

....
SERVER_HOSTNAME: quay-registry.apps.ocpcorpprod.icicibankltd.com
PREFERRED_URL_SCHEME: https
EXTERNAL_TLS_TERMINATION: false
....

= Quay Pods were not able to pull the images from registry.redhat.io

== Challenge
Quay was not getting up.

== Resolution
ICICI Bank Proxy team has enabled proxy for Quay Nodes.